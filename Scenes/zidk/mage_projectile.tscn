[gd_scene load_steps=20 format=3 uid="uid://bbco0ihgwlru1"]

[ext_resource type="Script" uid="uid://bcih858s23f8s" path="res://Scripts/tests/mage_projectile.gd" id="1_modmu"]
[ext_resource type="ArrayMesh" uid="uid://d11xfp7ihys5v" path="res://Assets/_my/fireball_head_mesh.obj" id="2_0gr0s"]
[ext_resource type="Shader" uid="uid://dgxuvs6hpakck" path="res://Shaders/pojectile/mage_projectile_ball.tres" id="2_wmgsc"]
[ext_resource type="Shader" uid="uid://dna72u8nellpt" path="res://Shaders/pojectile/mage_projectile.tres" id="3_36bjb"]
[ext_resource type="Shader" uid="uid://dey5l5ng5n1mv" path="res://Shaders/pojectile/mage_projectile_trail.tres" id="5_36bjb"]
[ext_resource type="Texture2D" uid="uid://ds4nwe17k3hwt" path="res://Assets/_my/T_VFX_basic1.PNG" id="6_iguuu"]
[ext_resource type="AudioStream" uid="uid://bxrtsx3bts2hl" path="res://Assets/Audio/431174__highpixel__fireball-explosion.wav" id="7_3b7pp"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_iguuu"]
render_priority = 1
shader = ExtResource("2_wmgsc")
shader_parameter/ball_color = Color(1, 0.517647, 0.14902, 1)

[sub_resource type="SphereMesh" id="SphereMesh_modmu"]

[sub_resource type="SphereShape3D" id="SphereShape3D_0gr0s"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_3b7pp"]
render_priority = 0
shader = ExtResource("3_36bjb")
shader_parameter/firecolor = Color(2, 1.3, 0.6, 1)
shader_parameter/head_movespeed = Vector2(3, 0.2)

[sub_resource type="Gradient" id="Gradient_36bjb"]
offsets = PackedFloat32Array(0, 0.461794)
colors = PackedColorArray(0.886275, 0.415686, 0, 1, 1, 0.815686, 0, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_iguuu"]
gradient = SubResource("Gradient_36bjb")
width = 8

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8lck6"]
render_priority = 0
shader = ExtResource("5_36bjb")
shader_parameter/colortexture = SubResource("GradientTexture1D_iguuu")
shader_parameter/head_movespeed = Vector2(-2, 0)

[sub_resource type="QuadMesh" id="QuadMesh_8ppnm"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_3b7pp"]
blend_mode = 1
cull_mode = 2
shading_mode = 0
disable_ambient_light = true
disable_fog = true
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_texture = ExtResource("6_iguuu")

[sub_resource type="QuadMesh" id="QuadMesh_iguuu"]
size = Vector2(0.1, 0.5)

[sub_resource type="Curve" id="Curve_8lck6"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="BoxShape3D" id="BoxShape3D_iguuu"]
size = Vector3(0.453178, 1.09418, 0.546387)

[node name="mage_projectile" type="Node3D"]
script = ExtResource("1_modmu")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(-1.04907e-08, 0, -0.24, 0, 0.24, 0, 0.24, 0, -1.04907e-08, 9.57905e-10, 1.11641e-24, 0.108181)
material_override = SubResource("ShaderMaterial_iguuu")
mesh = SubResource("SphereMesh_modmu")

[node name="RigidBody3D" type="RigidBody3D" parent="MeshInstance3D"]
transform = Transform3D(1, 0, -8.88178e-16, 0, 1, 0, 0, 0, 1, 0, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="MeshInstance3D/RigidBody3D"]
transform = Transform3D(1, 0, -3.55271e-14, 0, 0.999997, 0, 0, 0, 0.999997, 0, 0, 0)
shape = SubResource("SphereShape3D_0gr0s")

[node name="FireballHeadMesh" type="MeshInstance3D" parent="."]
transform = Transform3D(-1.1164e-08, 0, 0.2, 0, 0.183121, 0, -0.255403, 0, -8.74228e-09, 1.2815e-09, 1.11641e-24, 0.0242428)
material_override = SubResource("ShaderMaterial_3b7pp")
cast_shadow = 0
mesh = ExtResource("2_0gr0s")

[node name="trailmesh" type="MeshInstance3D" parent="."]
transform = Transform3D(-1.01289e-07, -0.579096, -4.77215e-08, 0, -2.53131e-08, 1.09174, -2.31723, 2.53131e-08, 2.08597e-15, -4.82254e-08, -1.8979e-23, -1.10834)
material_override = SubResource("ShaderMaterial_8lck6")
mesh = SubResource("QuadMesh_8ppnm")

[node name="trailmesh2" type="MeshInstance3D" parent="."]
transform = Transform3D(-1.01079e-07, -9.52824e-16, 0.998025, 0, 0.626375, 1.51817e-15, -2.31242, 4.16493e-23, -4.3625e-08, -4.82254e-08, -1.8979e-23, -1.10834)
material_override = SubResource("ShaderMaterial_8lck6")
mesh = SubResource("QuadMesh_8ppnm")

[node name="GPUParticles3D" type="CPUParticles3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0.00308625, 1.49012e-08, -0.285122)
material_override = SubResource("StandardMaterial3D_3b7pp")
amount = 7
lifetime = 0.3
explosiveness = 0.4
fixed_fps = 30
visibility_aabb = AABB(-4, -4, -4, 8, 8, 8)
mesh = SubResource("QuadMesh_iguuu")
emission_shape = 2
emission_sphere_radius = 0.5
particle_flag_align_y = true
spread = 0.0
gravity = Vector3(0, 0, 0)
initial_velocity_min = 3.0
initial_velocity_max = 8.0
scale_amount_min = 1.2
scale_amount_max = 1.2
scale_amount_curve = SubResource("Curve_8lck6")
color = Color(2, 1.5, 0.5, 1)

[node name="Area3D" type="Area3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00175863, -0.345795, 0.0070802)
shape = SubResource("BoxShape3D_iguuu")

[node name="VisibleOnScreenNotifier3D" type="VisibleOnScreenNotifier3D" parent="."]

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("7_3b7pp")
volume_db = -10.0
autoplay = true
bus = &"SFX"

[connection signal="body_entered" from="Area3D" to="." method="_on_area_3d_body_entered"]
[connection signal="screen_exited" from="VisibleOnScreenNotifier3D" to="." method="_on_visible_on_screen_notifier_3d_screen_exited"]
